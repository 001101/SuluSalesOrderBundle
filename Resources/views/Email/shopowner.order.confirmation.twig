{% trans_default_domain "order_confirmation_email" %}

{% block subject %}
    {% trans with {
        '%number%': order.number,
        '%date%': order.orderDate|localizeddate('medium', 'none')|default('')
    } %}owner.subject{% endtrans %}
{% endblock %}

{% block body_html %}
    {% import _self as macros %}
    <html>
    <head>
        <style type="text/css">
            body {
                font-family: Helvetica, Arial;
            }
        </style>
    </head>
    <body>
        <p>
            <strong>{{ macros.getSalutation() }},</strong>
        </p>
        <p>
            {{ macros.translateContent(contact, order) }}
        </p>
    </body>
    </html>
{% endblock %}

{% block body_text %}
{% import _self as macros %}

{% spaceless %}
{{ macros.getSalutation() }},
{{ macros.translateContent(contact, order) }}
{% endspaceless %}

{% endblock %}

{% macro getSalutation(contact) %}{{ contact.getSalutation()|default('default.salutation'|trans) ~ ' ' ~ contact.getFullName()|default('default.owner'|trans) }}{% endmacro %}
{% macro getGender(contact) %}
    {% if contact and contact.getFormOfAddress() %}
        {% if contact.getFormOfAddress() == 0 %}
            {{ 'contact.contacts.formOfAddress.male'|trans({},'backend') }}
        {% else %}
            {{ 'contact.contacts.formOfAddress.female'|trans({},'backend') }}
        {% endif %}
    {% endif %}
{% endmacro %}
{% macro translateContent(contact, order) %}
    {% import _self as macros %}
    {% trans with {
    '%gender%': macros.getGender(contact),
    '%customerName%': contact.getFullName(),
    '%customerAccount%': order.getCustomerAccount().name
    } %}owner.content{% endtrans %}
{% endmacro %}
